!function(e,t){"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.findAndReplaceDOMText=t()}(this,function(){function e(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function t(){return n.apply(null,arguments)||r.apply(null,arguments)}function n(e,n,o,i,d){if(n&&!n.nodeType&&arguments.length<=2)return!1;var a="function"==typeof o;a&&(o=function(e){return function(t,n){return e(t.text,n.startIndex)}}(o));var s=r(n,{find:e,wrap:a?null:o,replace:a?o:"$"+(i||"&"),prepMatch:function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(i>0){var n=e[i];e.index+=e[0].indexOf(n),e[0]=n}return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},filterElements:d});return t.revert=function(){return s.revert()},!0}function r(e,t){return new o(e,t)}function o(e,n){var r=n.preset&&t.PRESETS[n.preset];if(n.portionMode=n.portionMode||i,r)for(var o in r)s.call(r,o)&&!s.call(n,o)&&(n[o]=r[o]);this.node=e,this.options=n,this.prepMatch=n.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}var i="retain",d="first",a=document,s={}.hasOwnProperty;return t.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1},t.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1},t.NON_INLINE_PROSE=function(e){return s.call(t.NON_CONTIGUOUS_PROSE_ELEMENTS,e.nodeName.toLowerCase())},t.PRESETS={prose:{forceContext:t.NON_INLINE_PROSE,filterElements:function(e){return!s.call(t.NON_PROSE_ELEMENTS,e.nodeName.toLowerCase())}}},t.Finder=o,o.prototype={search:function(){function t(e){for(var d=0,c=e.length;d<c;++d){var l=e[d];if("string"==typeof l){if(i.global)for(;n=i.exec(l);)a.push(s.prepMatch(n,r++,o));else(n=l.match(i))&&a.push(s.prepMatch(n,0,o));o+=l.length}else t(l)}}var n,r=0,o=0,i=this.options.find,d=this.getAggregateText(),a=[],s=this;return i="string"==typeof i?RegExp(e(i),"g"):i,t(d),a},prepMatch:function(e,t,n){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=n+e.index+e[0].length,e.startIndex=n+e.index,e.index=t,e},getAggregateText:function(){function e(r){if(r.nodeType===Node.TEXT_NODE)return[r.data];if(t&&!t(r))return[];var o=[""],i=0;if(r=r.firstChild)do if(r.nodeType!==Node.TEXT_NODE){var d=e(r);n&&r.nodeType===Node.ELEMENT_NODE&&(n===!0||n(r))?(o[++i]=d,o[++i]=""):("string"==typeof d[0]&&(o[i]+=d.shift()),d.length&&(o[++i]=d,o[++i]=""))}else o[i]+=r.data;while(r=r.nextSibling);return o}var t=this.options.filterElements,n=this.options.forceContext;return e(this.node)},processMatches:function(){var e,t,n,r=this.matches,o=this.node,i=this.options.filterElements,d=[],a=o,s=r.shift(),c=0,l=0,p=0,u=[o];e:for(;;){if(a.nodeType===Node.TEXT_NODE&&(!t&&a.length+c>=s.endIndex?t={node:a,index:p++,text:a.data.substring(s.startIndex-c,s.endIndex-c),indexInMatch:c-s.startIndex,indexInNode:s.startIndex-c,endIndexInNode:s.endIndex-c,isEnd:!0}:e&&d.push({node:a,index:p++,text:a.data,indexInMatch:c-s.startIndex,indexInNode:0}),!e&&a.length+c>s.startIndex&&(e={node:a,index:p++,indexInMatch:0,indexInNode:s.startIndex-c,endIndexInNode:s.endIndex-c,text:a.data.substring(s.startIndex-c,s.endIndex-c)}),c+=a.data.length),n=a.nodeType===Node.ELEMENT_NODE&&i&&!i(a),e&&t){if(a=this.replaceMatch(s,e,d,t),c-=t.node.data.length-t.endIndexInNode,e=null,t=null,d=[],s=r.shift(),p=0,l++,!s)break}else if(!n&&(a.firstChild||a.nextSibling)){a.firstChild?(u.push(a),a=a.firstChild):a=a.nextSibling;continue}for(;;){if(a.nextSibling){a=a.nextSibling;break}if(a=u.pop(),a===o)break e}}},revert:function(){for(var e=this.reverts.length;e--;)this.reverts[e]();this.reverts=[]},prepareReplacementString:function(e,t,n){var r=this.options.portionMode;return r===d&&t.indexInMatch>0?"":(e=e.replace(/\$(\d+|&|`|')/g,function(e,t){var r;switch(t){case"&":r=n[0];break;case"`":r=n.input.substring(0,n.startIndex);break;case"'":r=n.input.substring(n.endIndex);break;default:r=n[+t]}return r}),r===d?e:t.isEnd?e.substring(t.indexInMatch):e.substring(t.indexInMatch,t.indexInMatch+t.text.length))},getPortionReplacementNode:function(e,t){var n=this.options.replace||"$&",r=this.options.wrap,o=this.options.wrapClass;if(r&&r.nodeType){var i=a.createElement("div");i.innerHTML=r.outerHTML||(new XMLSerializer).serializeToString(r),r=i.firstChild}if("function"==typeof n)return n=n(e,t),n&&n.nodeType?n:a.createTextNode(String(n));var d="string"==typeof r?a.createElement(r):r;return d&&o&&(d.className=o),n=a.createTextNode(this.prepareReplacementString(n,e,t)),n.data&&d?(d.appendChild(n),d):n},replaceMatch:function(e,t,n,r){var o,i,d=t.node,s=r.node;if(d===s){var c=d;t.indexInNode>0&&(o=a.createTextNode(c.data.substring(0,t.indexInNode)),c.parentNode.insertBefore(o,c));var l=this.getPortionReplacementNode(r,e);return c.parentNode&&c.parentNode.insertBefore(l,c),r.endIndexInNode<c.length&&(i=a.createTextNode(c.data.substring(r.endIndexInNode)),c.parentNode.insertBefore(i,c)),c.parentNode.removeChild(c),this.reverts.push(function(){o===l.previousSibling&&o.parentNode.removeChild(o),i===l.nextSibling&&i.parentNode.removeChild(i),l.parentNode.replaceChild(c,l)}),l}o=a.createTextNode(d.data.substring(0,t.indexInNode)),i=a.createTextNode(s.data.substring(r.endIndexInNode));for(var p=this.getPortionReplacementNode(t,e),u=[],h=0,f=n.length;h<f;++h){var g=n[h],N=this.getPortionReplacementNode(g,e);g.node.parentNode.replaceChild(N,g.node),this.reverts.push(function(e,t){return function(){t.parentNode.replaceChild(e.node,t)}}(g,N)),u.push(N)}var m=this.getPortionReplacementNode(r,e);return d.parentNode.insertBefore(o,d),d.parentNode.insertBefore(p,d),d.parentNode.removeChild(d),s.parentNode.insertBefore(m,s),s.parentNode.insertBefore(i,s),s.parentNode.removeChild(s),this.reverts.push(function(){o.parentNode.removeChild(o),p.parentNode.replaceChild(d,p),i.parentNode.removeChild(i),m.parentNode.replaceChild(s,m)}),m}},t}),function(){function e(){n&&t()}function t(e){x||requestAnimationFrame(function(){a(e)}),x=!0}var n=!1,r=document.getElementById("switch"),o=document.getElementById("switch-label-status"),i=function(){n=!1;var e=" "+document.body.className+" ";document.body.className=e.replace(" t-chip-enabled "," "),o.innerHTML="Disabled",clearCanvases()},d=function(){n=!0,document.body.className+=" t-chip-enabled",o.innerHTML="Enabled",e()};r.onclick=function(){n?i():d()};var a,s,c,l,p,u,h,f,g,N=[],m=[],x=!1;a=function(e){x=!1,"undefined"==typeof e&&(e=N);for(var t in e){var n=e[t],r=m[t];f(n)&&(p(r),u(r,n))}},f=function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return e.offsetParent&&t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},s=function(e,t){switch(t){case 1:wrapRum(e||document);break;default:wrapTrump(e||document)}},wrapTrump=function(e){try{findAndReplaceDOMText(e,{preset:"prose",find:/(tT)rump/g,forceContext:!0,wrap:"span",wrapClass:"censored"})}catch(e){}},wrapRum=function(e){try{findAndReplaceDOMText(e,{preset:"prose",find:/([tT])rump/g,forceContext:!0,replace:function(e,t){var n=t[1]+'<span class="censored">rum</span>p',r=document.createElement("span");return r.innerHTML=n,r}})}catch(e){}},c=function(e){if("undefined"==typeof e&&(e=document),e.nodeType&&(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.DOCUMENT_NODE))for(var t=e.getElementsByClassName("censored"),n=0;n<t.length;n++)N.push(t[n]),m.push(l(t[n]))},clearCanvases=function(){for(var e in N){var t=N[e];t.style=""}},l=function(e){var t=document.createElement("canvas"),n=e.getBoundingClientRect();t.width=n.width,t.height=n.height;var r=t.getContext("2d");return r.fillStyle=window.getComputedStyle(e,null).color,t},p=function(e){var t=e.getContext("2d"),n=6;e.height>=36&&(n=12),e.height>=64&&(n=24);var r=e.width/n,o=Math.ceil(e.height/n);t.clearRect(0,0,e.width,e.height);for(var i=0;i<o;i++)for(var d=0;d<r;d++)t.globalAlpha=getWeightedRandom(),t.fillRect(d*n,i*n,n,n)},u=function(e,t){var n=t.style;n.backgroundImage="url("+e.toDataURL()+")",n.backgroundRepeat="no-repeat",n.backgroundPosition="center center",n.color="transparent"},setupWeightedRandomTable=function(e){var t,n,r=[];for(t in e)for(n=0;n<10*e[t];n++)r.push(t);return function(){return r[Math.floor(Math.random()*r.length)]}},h=function(){g=new MutationObserver(function(e,n){n.disconnect();var r=N.slice();e.forEach(function(e){for(var t=0;t<e.addedNodes.length;t++)s(e.addedNodes[t],1),c(e.addedNodes[t])}),n.observe(document.body,{childList:!0,subtree:!0});var o=N.filter(function(e){return r.indexOf(e)<0});t(o)}),g.observe(document.body,{childList:!0,subtree:!0})},s(document,1),c(),h(),getWeightedRandom=setupWeightedRandomTable({0:12,.1:10,.2:8,.3:7,.4:6,.5:5,.6:3,.7:2,.8:1,.9:.5,1:.25}),window.addEventListener("scroll",e),n&&a()}();